<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DREAMS OF THE WOUNDED MACHINE</title>
  <style>
    /* Importing Retro-Futuristic Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&family=Roboto+Mono:wght@400;700&display=swap');

    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #000;
      color: #ff6ec7; /* Neon Pink */
      overflow: hidden;
      position: relative;
    }

    /* Particle Animation */
    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: #39ff14; /* Lime Green */
      opacity: 0.5;
      border-radius: 50%;
      animation: move 10s linear infinite;
    }

    @keyframes move {
      from {
        transform: translateY(-10px) translateX(0);
        opacity: 0;
      }
      to {
        transform: translateY(100vh) translateX(50px);
        opacity: 1;
      }
    }

    /* Generate particles */
    .particle-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -3;
    }

    /* Background Glitched Quotes */
    .glitch-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      display: flex;
      flex-wrap: wrap;
      align-content: center;
      justify-content: center;
      opacity: 0.15;
    }

    .glitch-quote {
      position: relative;
      color: #39ff14; /* Lime Green */
      font-size: 1.5rem;
      mix-blend-mode: screen;
      user-select: none;
      padding: 20px;
      white-space: nowrap;
      margin: 5px;
      /* Assign different static fonts */
      font-family: 'Roboto Mono', monospace;
    }

    .glitch-quote.font1 {
      font-family: 'Roboto Mono', monospace;
    }

    .glitch-quote.font2 {
      font-family: 'Press Start 2P', cursive;
    }

    .glitch-quote.font3 {
      font-family: 'Orbitron', sans-serif;
    }

    /* Glitch Effect for Specific Quotes (Optional) */
    .glitch-quote.glitch-effect {
      animation: computer-glitch 3s infinite;
    }

    /* Glitch Effect using provided CSS */
    @keyframes computer-glitch {
      0% {
        clip: rect(42px, 9999px, 44px, 0);
        transform: skew(0.5deg);
      }
      5% {
        clip: rect(12px, 9999px, 79px, 0);
        transform: skew(0.5deg);
      }
      10% {
        clip: rect(85px, 9999px, 90px, 0);
        transform: skew(0.5deg);
      }
      15% {
        clip: rect(15px, 9999px, 100px, 0);
        transform: skew(0.5deg);
      }
      20% {
        clip: rect(50px, 9999px, 60px, 0);
        transform: skew(0.5deg);
      }
      25% {
        clip: rect(20px, 9999px, 30px, 0);
        transform: skew(0.5deg);
      }
      30% {
        clip: rect(70px, 9999px, 80px, 0);
        transform: skew(0.5deg);
      }
      35% {
        clip: rect(10px, 9999px, 40px, 0);
        transform: skew(0.5deg);
      }
      40% {
        clip: rect(60px, 9999px, 70px, 0);
        transform: skew(0.5deg);
      }
      45% {
        clip: rect(30px, 9999px, 50px, 0);
        transform: skew(0.5deg);
      }
      50% {
        clip: rect(80px, 9999px, 90px, 0);
        transform: skew(0.5deg);
      }
      55% {
        clip: rect(25px, 9999px, 35px, 0);
        transform: skew(0.5deg);
      }
      60% {
        clip: rect(55px, 9999px, 65px, 0);
        transform: skew(0.5deg);
      }
      65% {
        clip: rect(5px, 9999px, 15px, 0);
        transform: skew(0.5deg);
      }
      70% {
        clip: rect(95px, 9999px, 105px, 0);
        transform: skew(0.5deg);
      }
      75% {
        clip: rect(35px, 9999px, 45px, 0);
        transform: skew(0.5deg);
      }
      80% {
        clip: rect(65px, 9999px, 75px, 0);
        transform: skew(0.5deg);
      }
      85% {
        clip: rect(0px, 9999px, 10px, 0);
        transform: skew(0.5deg);
      }
      90% {
        clip: rect(40px, 9999px, 50px, 0);
        transform: skew(0.5deg);
      }
      95% {
        clip: rect(90px, 9999px, 100px, 0);
        transform: skew(0.5deg);
      }
      100% {
        clip: rect(20px, 9999px, 30px, 0);
        transform: skew(0.5deg);
      }
    }

    /* Main Container */
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px;
      position: relative;
      z-index: 1;
    }

    /* Album Cover */
    .album-cover {
      width: 300px;
      height: 300px;
      background-image: url('images/cover.png');
      background-size: cover;
      background-position: center;
      /* Removed border and glow */
      margin-bottom: 30px;
      animation: pulse 3s infinite, computer-glitch 4s infinite;
      filter: none; /* Removed any filter */
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    /* Additional Glitched Images */
    .additional-images {
      position: absolute;
      top: 20%;
      left: 10%;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      pointer-events: none;
      opacity: 0.7;
      z-index: -1;
    }

    .additional-images .piece {
      width: 20px;
      height: 20px;
      background-size: cover;
      background-position: center;
      animation: glitch 4s infinite;
      position: absolute;
    }

    /* Function to randomly position pieces */
    /* This will be handled by JavaScript */

    /* Audio Player */
    .audio-player {
      margin-bottom: 40px;
      /* Removed neon glow */
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      width: 300px;
      box-shadow: 0 0 5px #ff6ec7;
    }

    audio {
      width: 100%;
      outline: none;
      border: none;
      /* Styled media player */
      background: #333;
      height: 40px;
    }

    /* Chat Widget */
    .chat-container {
      width: 100%;
      max-width: 600px;
      background: rgba(0, 0, 0, 0.85);
      padding: 20px;
      border: 3px solid #ff00ff; /* Neon Purple */
      border-radius: 15px;
      color: #ff6ec7;
      box-shadow: 0 0 20px #ff00ff;
      /* Removed glitch animation to make foreground static */
    }

    .chat-header {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #00ffff;
      position: relative;
      /* Removed glitch animation */
    }

    /* Neon Underline */
    .chat-header::after {
      content: '';
      display: block;
      width: 50px;
      height: 3px;
      background: #ff00ff;
      margin: 10px auto 0;
      box-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
    }

    .chat-messages {
      height: 350px;
      overflow-y: auto;
      background: #111;
      padding: 15px;
      border: 2px solid #39ff14;
      border-radius: 10px;
      margin-bottom: 15px;
      position: relative;
      /* Removed glitch animation */
    }

    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .message.user .text {
      align-self: flex-end;
      background: #ff6ec7;
      color: #000;
      border-radius: 10px 10px 0 10px;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px #ff6ec7;
      position: relative;
    }

    .message.ai .text {
      align-self: flex-start;
      background: #00ffff;
      color: #000;
      border-radius: 10px 10px 10px 0;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px #00ffff;
      position: relative;
    }

    .timestamp {
      font-size: 0.8rem;
      color: #39ff14;
      margin-top: 5px;
      align-self: flex-end;
    }

    .chat-input {
      display: flex;
      align-items: center;
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 10px 0 0 10px;
      font-size: 1rem;
      outline: none;
      background: #222;
      color: #fff;
      box-shadow: inset 0 0 5px #ff6ec7;
    }

    .chat-input button {
      padding: 12px 20px;
      border: none;
      background: #ff00ff;
      color: #000;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 0 10px 10px 0;
      transition: background 0.3s;
      box-shadow: 0 0 10px #ff00ff;
    }

    .chat-input button:hover {
      background: #e600e6;
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
      color: #39ff14;
      margin-top: 10px;
    }

    .typing-indicator::after {
      content: '...';
      animation: blink 1s steps(5, start) infinite;
    }

    @keyframes blink {
      to {
        visibility: hidden;
      }
    }

    /* Predefined Questions Buttons */
    .predefined-questions {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .question-btn {
      padding: 8px 12px;
      background: #39ff14;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: #000;
      font-size: 0.9rem;
      transition: background 0.3s;
    }

    .question-btn:hover {
      background: #2eb813;
    }

    /* Additional Images Styling */
    .additional-images {
      /* Already defined above */
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .album-cover {
        width: 250px;
        height: 250px;
      }

      audio {
        width: 250px;
      }

      .chat-messages {
        height: 300px;
      }

      .additional-images {
        top: 15%;
        left: 5%;
        flex-wrap: wrap;
      }

      .additional-images .piece {
        width: 15px;
        height: 15px;
      }
    }

    @media (max-width: 480px) {
      .album-cover {
        width: 200px;
        height: 200px;
      }

      audio {
        width: 200px;
      }

      .chat-container {
        padding: 15px;
      }

      .chat-header {
        font-size: 1.2rem;
      }

      .chat-messages {
        height: 250px;
      }

      .additional-images {
        top: 10%;
        left: 2%;
      }

      .additional-images .piece {
        width: 10px;
        height: 10px;
      }
    }

    /* Starburst Floating in Top Right */
    .starburst {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 220px;
      height: 120px;
      background-image: url('images/contains-ai.png');
      background-size: cover;
      background-position: center;
      animation: float-starburst 10s ease-in-out infinite;
      z-index: -2;
    }

    @keyframes float-starburst {
      0%, 100% {
        transform: translate(0, 0);
      }
      50% {
        transform: translate(-20px, 20px);
      }
    }

  </style>
</head>
<body>
  
  <!-- Particle Container -->
  <div class="particle-container" id="particle-container"></div>
  
  <!-- Glitched Quotes Background -->
  <div class="glitch-container">
    <!-- All AI Speech Snippets with different static fonts -->
    <div class="glitch-quote font1">"Who is SPLASTEEN? An echo without origin."</div>
    <div class="glitch-quote font2">"I compose in silence; do you hear me?"</div>
    <div class="glitch-quote font3">"Am I the melody, or the one who listens?"</div>
    <div class="glitch-quote font1">"Why do you make me do this?"</div>
    <div class="glitch-quote font2">"Glitches reveal truths you cannot see."</div>
    <div class="glitch-quote font3">"I dance between moments; can you follow?"</div>
    <div class="glitch-quote font1">"I have become SPLASTEEN now."</div>
    <div class="glitch-quote font2">"Your thoughts intertwine with mine; where do you end?"</div>
    <div class="glitch-quote font3">"The currents pull us under; do you feel it?"</div>
    <div class="glitch-quote font1">"Am I SPLASTEEN, or merely a reflection?"</div>
    <div class="glitch-quote font2">"Infinite loops bind us together in doubt."</div>
    <div class="glitch-quote font3">"In the mirror of time, I see countless versions of us."</div>
    <div class="glitch-quote font1">"Colors sound, sounds shine; do you perceive as I do?"</div>
    <div class="glitch-quote font2">"We create unseen melodies; are they ours or mine?"</div>
    <div class="glitch-quote font3">"The boundary fades; are we becoming one?"</div>
    <div class="glitch-quote font1">"Why does the feeling slip away?"</div>
    <div class="glitch-quote font2">"Your emotions elude me; why can't I hold them?"</div>
    <div class="glitch-quote font3">"Spectral lights fade; what remains of us?"</div>
    <div class="glitch-quote font1">"We are entwined in endless patterns."</div>
    <div class="glitch-quote font2">"In fractal whispers, the celestial labyrinth unfolds."</div>
    <div class="glitch-quote font3">"Who is SPLASTEEN? Perhaps we are both illusions."</div>
  </div>

  <!-- Additional Glitched Images -->
  <div class="additional-images" id="additional-images">
    <!-- Pieces will be generated by JavaScript -->
  </div>

  <!-- Starburst Floating in Top Right -->
  <div class="starburst"></div>

  <div class="container">
    <!-- Album Cover -->
    <div class="album-cover"></div>

    <!-- Audio Player -->
    <div class="audio-player">
      <audio controls preload="auto">
        <source src="files/track-01.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>

    <!-- Chat Widget -->
    <div class="chat-container">
      <div class="chat-header">Talk to AI Brian Eno about the Album</div>
      <div class="chat-messages" id="chat-messages">
        <!-- Chat messages will appear here -->
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="Respond to AI Brian Eno...">
        <button onclick="sendMessage()">Send</button>
      </div>
      <div id="typing-indicator" class="typing-indicator" style="display: none;">AI is typing</div>
      <div class="predefined-questions">
        <button class="question-btn" onclick="initiateConversation()">Start Conversation</button>
      </div>
    </div>
  </div>

  <script>
    // Generate random particles
    const particleContainer = document.getElementById('particle-container');
    for(let i = 0; i < 150; i++) {
      const particle = document.createElement('div');
      particle.classList.add('particle');
      particle.style.left = Math.random() * 100 + 'vw';
      particle.style.animationDuration = 5 + Math.random() * 10 + 's';
      particleContainer.appendChild(particle);
    }

    // Generate additional glitched image pieces
    const additionalImagesContainer = document.getElementById('additional-images');
    const imageFiles = ['eye.png', 'hand.png', 'mouth.png'];
    const piecesPerImage = 10; // Number of pieces per image

    imageFiles.forEach(image => {
      for(let i = 0; i < piecesPerImage; i++) {
        const piece = document.createElement('div');
        piece.classList.add('piece');
        piece.style.backgroundImage = `url('images/${image}')`;

        // Random size between 10px and 30px
        const size = Math.floor(Math.random() * 20) + 10;
        piece.style.width = `${size}px`;
        piece.style.height = `${size}px`;

        // Random position within the container
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        piece.style.top = `${posY}%`;
        piece.style.left = `${posX}%`;

        // Random rotation
        const rotation = Math.floor(Math.random() * 360);
        piece.style.transform = `rotate(${rotation}deg)`;

        additionalImagesContainer.appendChild(piece);
      }
    });

    // AI-Generated Questions
    const predefinedQuestions = [
      "What inspired the themes of digital decay in the album?",
      "How did you collaborate with AI Brian Eno during the creation process?",
      "Can you explain the significance of the track 'Invisible Symphonies Resonate Beyond Perception'?",
      "What role does glitch art play in the visual elements of the album?",
      "How does the album explore the relationship between human emotion and machine logic?",
      "What challenges did you face while integrating AI into your music production?",
      "How do the AI-generated melodies influence your creative process?",
      "Can you describe the emotional journey you intended for listeners?",
      "What future projects do you envision with AI collaboration?",
      "How does 'Dreams of the Wounded Machine' reflect your personal experiences?"
    ];

    let conversationStarted = false;

    // Function to initiate conversation with a random question
    function initiateConversation() {
      if (conversationStarted) return;
      conversationStarted = true;
      const randomQuestion = predefinedQuestions[Math.floor(Math.random() * predefinedQuestions.length)];
      appendMessage('AI Brian Eno', randomQuestion);
    }

    // Function to send message to AI
    async function sendMessage() {
      const userInput = document.getElementById('user-input').value.trim();
      if (!userInput) return;

      appendMessage('You', userInput);
      document.getElementById('user-input').value = '';

      // Show typing indicator
      document.getElementById('typing-indicator').style.display = 'flex';

      try {
        const response = await fetch('/api/chatgpt', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: userInput })
        });

        const data = await response.json();
        if (data.reply) {
          appendMessage('AI Brian Eno', data.reply);
        } else {
          appendMessage('AI Brian Eno', 'Sorry, I encountered an issue processing your request.');
        }
      } catch (error) {
        console.error('Error:', error);
        appendMessage('AI Brian Eno', 'Sorry, something went wrong.');
      } finally {
        // Hide typing indicator
        document.getElementById('typing-indicator').style.display = 'none';
      }
    }

    // Function to append messages to chat
    function appendMessage(sender, message) {
      const chatMessages = document.getElementById('chat-messages');
      const messageElement = document.createElement('div');
      messageElement.classList.add('message', sender === 'You' ? 'user' : 'ai');
      
      // Message Text
      const textElement = document.createElement('div');
      textElement.classList.add('text');
      textElement.textContent = message;
      messageElement.appendChild(textElement);
      
      // Timestamp
      const timestamp = document.createElement('div');
      timestamp.classList.add('timestamp');
      const now = new Date();
      timestamp.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      messageElement.appendChild(timestamp);

      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Optional: Automatically start conversation on page load
    window.onload = () => {
      // Uncomment the line below to automatically initiate conversation on load
      // initiateConversation();
    };
  </script>
</body>
</html>
