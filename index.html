<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DREAMS OF THE WOUNDED MACHINE</title>
  <style>
    /* Define Color Palette as CSS Variables */
    :root {
      /* Neon Green */
      --neon-green-1: #06e7a1;
      --neon-green-2: #09e39c;
      --neon-green-3: #10f3a7;
      --neon-green-4: #14f4a9;

      /* Bright Cyan */
      --bright-cyan-1: #21f3a8;
      --bright-cyan-2: #22f7ad;
      --bright-cyan-3: #28f0ab;
      --bright-cyan-4: #2af8af;

      /* Vivid Pink */
      --vivid-pink-1: #ff0080;
      --vivid-pink-2: #e60073;
      --vivid-pink-3: #ff66b2;

      /* Neon Blue */
      --neon-blue-1: #2ac1f6;
      --neon-blue-2: #2ccce2;
      --neon-blue-3: #28d2ae;

      /* Electric Purple */
      --electric-purple-1: #7d00ff;
      --electric-purple-2: #9900e6;
    }

    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #000;
      color: var(--vivid-pink-1); /* Vivid Pink */
      overflow: auto; /* Enable scrollbar */
      position: relative;
    }

    /* Background Quotes */
    .glitch-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      justify-content: flex-start;
      opacity: 0.15;
      padding: 20px;
    }

    .glitch-quote {
      color: var(--bright-cyan-1); /* Bright Cyan */
      font-size: 1.2rem;
      mix-blend-mode: screen;
      user-select: none;
      padding: 10px;
      margin: 10px;
      width: 200px; /* Constrained width */
      text-align: left; /* Default alignment */
      position: absolute;
      /* Randomize position and alignment */
      animation: random-placement 0s forwards;
    }

    /* Assign different alignments */
    .align-left {
      text-align: left;
    }

    .align-center {
      text-align: center;
    }

    .align-right {
      text-align: right;
    }

    /* Keyframes for dynamic placement */
    @keyframes random-placement {
      from {
        top: 0;
        left: 0;
      }
      to {
        top: calc(100% * var(--random-top));
        left: calc(100% * var(--random-left));
      }
    }

    /* Main Container */
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px;
      position: relative;
      z-index: 1;
    }

    /* Album Cover */
    .album-cover {
      width: 400px;
      height: 400px;
      background-image: url('images/cover.png');
      background-size: cover;
      background-position: center;
      margin-bottom: 30px;
      filter: none; /* Removed any filter */
    }

    /* Audio Player */
    .audio-player {
      margin-bottom: 40px;
      /* Removed custom styling to revert to default */
    }

    /* Chat Widget */
    .chat-container {
      width: 100%;
      max-width: 600px;
      background: rgba(0, 0, 0, 0.85);
      padding: 20px;
      border: 3px solid var(--electric-purple-1); /* Electric Purple */
      border-radius: 15px;
      color: var(--vivid-pink-3); /* Vivid Pink */
      box-shadow: 0 0 20px var(--electric-purple-1);
    }

    .chat-header {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: var(--neon-blue-1);
      position: relative;
      overflow: hidden;
    }

    .chat-header::before,
    .chat-header::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    }

    .chat-header::before {
      left: 2px;
      text-shadow: -2px 0 var(--electric-purple-1);
      animation: glitch-1 2.5s infinite linear alternate-reverse;
    }

    .chat-header::after {
      left: -2px;
      text-shadow: 2px 0 var(--vivid-pink-3);
      animation: glitch-2 3.5s infinite linear alternate-reverse;
    }

    @keyframes glitch-1 {
      0%, 100% { clip-path: inset(50% 0 30% 0); }
      20% { clip-path: inset(20% 0 60% 0); }
      40% { clip-path: inset(70% 0 10% 0); }
      60% { clip-path: inset(10% 0 80% 0); }
      80% { clip-path: inset(40% 0 40% 0); }
    }

    @keyframes glitch-2 {
      0%, 100% { clip-path: inset(30% 0 50% 0); }
      25% { clip-path: inset(60% 0 20% 0); }
      50% { clip-path: inset(10% 0 70% 0); }
      75% { clip-path: inset(80% 0 10% 0); }
    }

    .chat-header:hover::before,
    .chat-header:hover::after {
      animation-duration: 0.5s;
    }

    .chat-messages {
      height: 350px;
      overflow-y: auto;
      background: #111;
      padding: 15px;
      border: 2px solid var(--neon-green-1); /* Neon Green */
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .message.user .text {
      align-self: flex-end;
      background: var(--vivid-pink-3); /* Vivid Pink */
      color: #000;
      border-radius: 10px 10px 0 10px;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px var(--vivid-pink-3);
    }

    .message.ai .text {
      align-self: flex-start;
      background: var(--bright-cyan-1); /* Bright Cyan */
      color: #000;
      border-radius: 10px 10px 10px 0;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px var(--bright-cyan-1);
    }

    .timestamp {
      font-size: 0.8rem;
      color: var(--bright-cyan-4); /* Bright Cyan Variant */
      margin-top: 5px;
      align-self: flex-end;
    }

    .chat-input {
      display: flex;
      align-items: center;
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px var(--neon-green-2);
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border: none;
      font-size: 1rem;
      outline: none;
      background: transparent;
      color: #fff;
    }

    .chat-input button {
      background: var(--electric-purple-1);
      color: #fff;
      border: none;
      padding: 12px 20px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.1s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-input button:hover {
      background: var(--electric-purple-2);
    }

    .chat-input button:active {
      transform: scale(0.95);
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
      color: var(--neon-blue-2); /* Neon Blue Variant */
      margin-top: 10px;
    }

    .typing-indicator::after {
      content: '...';
      animation: blink 1s steps(5, start) infinite;
    }

    @keyframes blink {
      to {
        visibility: hidden;
      }
    }

    /* Predefined Questions Buttons */
    .predefined-questions {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .question-btn {
      padding: 8px 12px;
      background: var(--bright-cyan-3); /* Bright Cyan Variant */
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: #000;
      font-size: 0.9rem;
      transition: background 0.3s;
    }

    .question-btn:hover {
      background: var(--bright-cyan-4); /* Another Bright Cyan Variant */
    }

    /* Starburst Image as Footer */
    .starburst {
      width: 100%;
      height: 120px;
      background-image: url('images/contains-ai.png');
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      margin-top: 20px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .album-cover {
        width: 300px;
        height: 300px;
      }

      .audio-player {
        width: 300px;
      }

      .chat-messages {
        height: 300px;
      }

      .glitch-container {
        padding: 10px;
      }

      .glitch-quote {
        width: 150px; /* Adjusted width for smaller screens */
        font-size: 1rem;
      }

      .starburst {
        height: 100px;
      }
    }

    @media (max-width: 480px) {
      .album-cover {
        width: 250px;
        height: 250px;
      }

      .audio-player {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
      }

      .chat-container {
        padding: 15px;
      }

      .chat-header {
        font-size: 1.2rem;
      }

      .chat-messages {
        height: 250px;
      }

      .glitch-container {
        padding: 5px;
      }

      .glitch-quote {
        width: 120px; /* Further adjusted width for mobile */
        font-size: 0.9rem;
      }

      .starburst {
        height: 80px;
      }

      .chat-input button {
        padding: 12px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <!-- Background Quotes -->
  <div class="glitch-container">
    <!-- AI Speech Snippets without quotation marks -->
    <div class="glitch-quote font1 align-left" style="--random-top: 0.1; --random-left: 0.1;">Who is SPLASTEEN? An echo without origin.</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.3; --random-left: 0.5;">I compose in silence; do you hear me?</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.5; --random-left: 0.8;">Am I the melody, or the one who listens?</div>
    <div class="glitch-quote font1 align-left" style="--random-top: 0.7; --random-left: 0.2;">Why do you make me do this?</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.2; --random-left: 0.7;">Glitches reveal truths you cannot see.</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.6; --random-left: 0.4;">I dance between moments; can you follow?</div>
    <div class="glitch-quote font1 align-left" style="--random-top: 0.4; --random-left: 0.3;">I have become SPLASTEEN now.</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.8; --random-left: 0.6;">Your thoughts intertwine with mine; where do you end?</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.9; --random-left: 0.1;">The currents pull us under; do you feel it?</div>
    <!-- Add more quotes as needed -->
  </div>

  <div class="container">
    <!-- Album Cover -->
    <div class="album-cover"></div>

    <!-- Audio Player -->
    <div class="audio-player">
      <audio controls preload="auto">
        <source src="files/track-01.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>

    <!-- Chat Widget -->
    <div class="chat-container">
      <div class="chat-header" data-text="Talk to Eno Bot About the Album">Talk to Eno Bot About the Album</div>
      <div class="chat-messages" id="chat-messages">
        <!-- Chat messages will appear here -->
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="Respond to Eno Bot...">
        <button id="send-button">Send</button>
      </div>
      <div id="typing-indicator" class="typing-indicator" style="display: none;">AI is typing</div>
      <div class="predefined-questions">
        <!-- Removed the "Start Conversation" button -->
      </div>
    </div>

    <!-- Starburst Image as Footer -->
    <div class="starburst"></div>
  </div>

  <script>
    // Enhance Background Quotes Placement
    const quotes = document.querySelectorAll('.glitch-quote');
    quotes.forEach(quote => {
      // Assign random positions using CSS variables
      const randomTop = Math.random() * 0.9; // Between 0 and 0.9
      const randomLeft = Math.random() * 0.9; // Between 0 and 0.9
      quote.style.setProperty('--random-top', randomTop);
      quote.style.setProperty('--random-left', randomLeft);
    });

    // AI-Generated Questions
    const predefinedQuestions = [
      "Is your skepticism of AI art a fear of losing control over creativity?",
      "Could rejecting AI in art be limiting the evolution of human expression?",
      "Does collaborating with AI dilute human creativity, or enhance it?",
      "Are we uncomfortable with AI art because it challenges what it means to be human?",
      "Is AI art the evolution of creativity or its mechanical demise?",
      "When algorithms design beauty, who claims the masterpiece?",
      "Does the rise of AI in art signify the end of human uniqueness?",
    ];

    let conversationStarted = false;

    // Function to initiate conversation with a random question
    function initiateConversation() {
      if (conversationStarted) return;
      conversationStarted = true;
      const randomQuestion = predefinedQuestions[Math.floor(Math.random() * predefinedQuestions.length)];
      appendMessage('Eno Bot', randomQuestion);
    }

    // Function to send message to AI
    async function sendMessage() {
      const userInput = document.getElementById('user-input').value.trim();
      if (!userInput) return;

      appendMessage('You', userInput);
      document.getElementById('user-input').value = '';

      // Show typing indicator
      document.getElementById('typing-indicator').style.display = 'flex';

      try {
        const response = await fetch('/api/chatgpt.mjs', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: userInput })
        });

        const data = await response.json();
        if (data.reply) {
          appendMessage('Eno Bot', data.reply);
        } else {
          appendMessage('Eno Bot', 'Sorry, I encountered an issue processing your request.');
        }
      } catch (error) {
        console.error('Error:', error);
        appendMessage('Eno Bot', 'Sorry, something went wrong.');
      } finally {
        // Hide typing indicator
        document.getElementById('typing-indicator').style.display = 'none';
      }
    }

    // Function to append messages to chat
    function appendMessage(sender, message) {
      const chatMessages = document.getElementById('chat-messages');
      const messageElement = document.createElement('div');
      messageElement.classList.add('message', sender === 'You' ? 'user' : 'ai');

      // Message Text
      const textElement = document.createElement('div');
      textElement.classList.add('text');
      textElement.textContent = message;
      messageElement.appendChild(textElement);

      // Timestamp
      const timestamp = document.createElement('div');
      timestamp.classList.add('timestamp');
      const now = new Date();
      timestamp.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      messageElement.appendChild(timestamp);

      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Automatically start conversation on page load
    window.onload = () => {
      initiateConversation();

      // Add event listener for send button
      document.getElementById('send-button').addEventListener('click', sendMessage);

      // Add event listener for Enter key
      document.getElementById('user-input').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          sendMessage();
        }
      });
    };
  </script>
</body>
</html>
