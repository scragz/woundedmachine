<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DREAMS OF THE WOUNDED MACHINE</title>
  <style>
    /* Define Color Palette as CSS Variables */
    :root {
      /* Neon Green */
      --neon-green-1: #06e7a1;
      --neon-green-2: #09e39c;
      --neon-green-3: #10f3a7;
      --neon-green-4: #14f4a9;

      /* Bright Cyan */
      --bright-cyan-1: #21f3a8;
      --bright-cyan-2: #22f7ad;
      --bright-cyan-3: #28f0ab;
      --bright-cyan-4: #2af8af;

      /* Vivid Pink */
      --vivid-pink-1: #ff0080;
      --vivid-pink-2: #e60073;
      --vivid-pink-3: #ff66b2;

      /* Neon Blue */
      --neon-blue-1: #2ac1f6;
      --neon-blue-2: #2ccce2;
      --neon-blue-3: #28d2ae;

      /* Electric Purple */
      --electric-purple-1: #7d00ff;
      --electric-purple-2: #9900e6;
    }

    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #000;
      color: var(--vivid-pink-1); /* Vivid Pink */
      overflow: auto; /* Enable scrollbar */
      position: relative;
    }

    /* Background Quotes */
    .glitch-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      justify-content: flex-start;
      opacity: 0.15;
      padding: 20px;
    }

    .glitch-quote {
      color: var(--bright-cyan-1); /* Bright Cyan */
      font-size: 1.2rem;
      mix-blend-mode: screen;
      user-select: none;
      padding: 10px;
      margin: 10px;
      width: 200px; /* Constrained width */
      text-align: left; /* Default alignment */
      position: absolute;
      /* Randomize position and alignment */
      animation: random-placement 0s forwards;
    }

    /* Assign different alignments */
    .align-left {
      text-align: left;
    }

    .align-center {
      text-align: center;
    }

    .align-right {
      text-align: right;
    }

    /* Keyframes for dynamic placement */
    @keyframes random-placement {
      from {
        top: 0;
        left: 0;
      }
      to {
        top: calc(100% * var(--random-top));
        left: calc(100% * var(--random-left));
      }
    }

    /* Main Container */
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px;
      position: relative;
      z-index: 1;
    }

    /* Album Title */
    .album-title {
      font-size: 3rem;
      color: var(--neon-blue-1);
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 0 0 10px var(--neon-blue-1);
      position: relative;
      display: inline-block;
    }

    .album-title::before,
    .album-title::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .album-title::before {
      left: 2px;
      text-shadow: -2px 0 var(--vivid-pink-1);
      animation: glitch-1 3s infinite linear alternate-reverse;
    }

    .album-title::after {
      left: -2px;
      text-shadow: 2px 0 var(--electric-purple-1);
      animation: glitch-2 4s infinite linear alternate-reverse;
    }

    /* Album Cover */
    .album-cover {
      width: 400px;
      height: 400px;
      background-image: url('images/cover.png');
      background-size: cover;
      background-position: center;
      margin-bottom: 30px;
      filter: none; /* Removed any filter */
    }

    /* Audio Player */
    .audio-player {
      margin-bottom: 40px;
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .audio-player-label {
      font-size: 1.2rem;
      color: var(--vivid-pink-3);
      margin-bottom: 10px;
      text-align: center;
      position: relative;
      display: inline-block;
    }

    .audio-player-label::before {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      left: 1px;
      text-shadow: -1px 0 var(--neon-blue-1);
      animation: subtle-glitch 2s infinite linear alternate-reverse;
    }

    @keyframes subtle-glitch {
      0%, 100% { clip-path: inset(0 0 0 0); }
      20% { clip-path: inset(20% 0 0 0); }
      40% { clip-path: inset(0 20% 0 0); }
      60% { clip-path: inset(0 0 20% 0); }
      80% { clip-path: inset(0 0 0 20%); }
    }

    .audio-player audio {
      width: 100%;
    }

    /* Chat Widget */
    .chat-container {
      width: 100%;
      max-width: 600px;
      background: rgba(0, 0, 0, 0.85);
      padding: 20px;
      border: 3px solid var(--electric-purple-1); /* Electric Purple */
      border-radius: 15px;
      color: var(--vivid-pink-3); /* Vivid Pink */
      box-shadow: 0 0 20px var(--electric-purple-1);
    }

    .chat-header {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: var(--neon-blue-1);
      position: relative;
      overflow: hidden;
    }

    .chat-header::before,
    .chat-header::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
    }

    .chat-header::before {
      left: 2px;
      text-shadow: -2px 0 var(--electric-purple-1);
      animation: chat-glitch-1 2.5s infinite linear alternate-reverse;
    }

    .chat-header::after {
      left: -2px;
      text-shadow: 2px 0 var(--vivid-pink-3);
      animation: chat-glitch-2 3.5s infinite linear alternate-reverse;
    }

    @keyframes chat-glitch-1 {
      0%, 100% { clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%); }
      50% { clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%); }
    }

    @keyframes chat-glitch-2 {
      0%, 100% { clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%); }
      50% { clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%); }
    }

    .chat-header:hover::before,
    .chat-header:hover::after {
      animation-duration: 0.5s;
    }

    .chat-messages {
      height: 350px;
      overflow-y: auto;
      background: #111;
      padding: 15px;
      border: 2px solid var(--neon-green-1); /* Neon Green */
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .message.user .text {
      align-self: flex-end;
      background: var(--vivid-pink-3); /* Vivid Pink */
      color: #000;
      border-radius: 10px 10px 0 10px;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px var(--vivid-pink-3);
    }

    .message.ai .text {
      align-self: flex-start;
      background: var(--bright-cyan-1); /* Bright Cyan */
      color: #000;
      border-radius: 10px 10px 10px 0;
      padding: 10px;
      max-width: 80%;
      box-shadow: 0 0 10px var(--bright-cyan-1);
    }

    .timestamp {
      font-size: 0.8rem;
      color: var(--bright-cyan-4); /* Bright Cyan Variant */
      margin-top: 5px;
      align-self: flex-end;
    }

    .chat-input {
      display: flex;
      align-items: center;
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px var(--neon-green-2);
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border: none;
      font-size: 1rem;
      outline: none;
      background: transparent;
      color: #fff;
    }

    .chat-input button {
      background: var(--electric-purple-1);
      color: #fff;
      border: none;
      padding: 12px 20px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.1s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-input button:hover {
      background: var(--electric-purple-2);
    }

    .chat-input button:active {
      transform: scale(0.95);
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: var(--neon-blue-2);
      margin-top: 10px;
      height: 20px;
    }

    .typing-indicator::after {
      content: '';
      width: 10px;
      height: 10px;
      background-color: var(--neon-blue-2);
      border-radius: 50%;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      50% {
        transform: scale(1.2);
        opacity: 1;
      }
      100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
    }

    /* Predefined Questions Buttons */
    .predefined-questions {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .question-btn {
      padding: 8px 12px;
      background: var(--bright-cyan-3); /* Bright Cyan Variant */
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: #000;
      font-size: 0.9rem;
      transition: background 0.3s;
    }

    .question-btn:hover {
      background: var(--bright-cyan-4); /* Another Bright Cyan Variant */
    }

    /* Starburst Image as Footer */
    .starburst {
      width: 100%;
      height: 120px;
      background-image: url('images/contains-ai.png');
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      margin-top: 20px;
    }

    /* What Do You Dream Section */
    .dream-section {
      width: 100%;
      max-width: 800px;
      margin-top: 50px;
      text-align: center;
    }

    .dream-header {
      font-size: 3rem;
      color: var(--neon-blue-1);
      text-shadow: 0 0 10px var(--neon-blue-1);
      margin-bottom: 20px;
      position: relative;
      display: inline-block;
    }

    .dream-header::before,
    .dream-header::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .dream-header::before {
      left: 3px;
      text-shadow: -3px 0 var(--vivid-pink-1);
      animation: dream-glitch-1 2.5s infinite linear alternate-reverse;
    }

    .dream-header::after {
      left: -3px;
      text-shadow: 3px 0 var(--electric-purple-1);
      animation: dream-glitch-2 3.5s infinite linear alternate-reverse;
    }

    @keyframes dream-glitch-1 {
      0%, 100% { clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%); }
      50% { clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%); }
    }

    @keyframes dream-glitch-2 {
      0%, 100% { clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%); }
      50% { clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%); }
    }

    .dream-subheader {
      font-size: 1.5rem;
      color: var(--bright-cyan-1);
      margin-bottom: 30px;
      position: relative;
      display: inline-block;
    }

    .dream-subheader::before,
    .dream-subheader::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .dream-subheader::before {
      left: 2px;
      text-shadow: -2px 0 var(--neon-green-1);
      animation: subheader-glitch-1 3s infinite linear alternate-reverse;
    }

    .dream-subheader::after {
      left: -2px;
      text-shadow: 2px 0 var(--vivid-pink-2);
      animation: subheader-glitch-2 4s infinite linear alternate-reverse;
    }

    @keyframes subheader-glitch-1 {
      0%, 100% { clip-path: inset(0 0 0 0); }
      25% { clip-path: inset(0 25% 0 0); }
      50% { clip-path: inset(25% 0 25% 0); }
      75% { clip-path: inset(0 0 0 25%); }
    }

    @keyframes subheader-glitch-2 {
      0%, 100% { clip-path: inset(0 0 0 0); }
      20% { clip-path: inset(20% 0 20% 0); }
      40% { clip-path: inset(0 20% 0 20%); }
      60% { clip-path: inset(10% 10% 10% 10%); }
      80% { clip-path: inset(5% 15% 15% 5%); }
    }

    .dream-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
    }

    .dream-see, .dream-hear {
      width: 48%;
    }

    .dream-see h3, .dream-hear h3 {
      margin-bottom: 10px;
      color: var(--neon-green-1);
      position: relative;
      display: inline-block;
    }

    .dream-see h3::before,
    .dream-see h3::after,
    .dream-hear h3::before,
    .dream-hear h3::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .dream-see h3::before {
      left: 1px;
      text-shadow: -1px 0 var(--vivid-pink-2);
      animation: see-glitch 2s infinite linear alternate-reverse;
    }

    .dream-see h3::after {
      left: -1px;
      text-shadow: 1px 0 var(--neon-blue-1);
      animation: see-glitch 3s infinite linear alternate-reverse;
    }

    .dream-hear h3::before {
      left: 1px;
      text-shadow: -1px 0 var(--electric-purple-1);
      animation: hear-glitch 2.5s infinite linear alternate-reverse;
    }

    .dream-hear h3::after {
      left: -1px;
      text-shadow: 1px 0 var(--bright-cyan-1);
      animation: hear-glitch 3.5s infinite linear alternate-reverse;
    }

    @keyframes see-glitch {
      0%, 100% { clip-path: inset(0 0 0 0); }
      25% { clip-path: inset(0 25% 0 0); }
      50% { clip-path: inset(25% 0 25% 0); }
      75% { clip-path: inset(0 0 0 25%); }
    }

    @keyframes hear-glitch {
      0%, 100% { clip-path: inset(0 0 0 0); }
      20% { clip-path: inset(20% 0 20% 0); }
      40% { clip-path: inset(0 20% 0 20%); }
      60% { clip-path: inset(10% 10% 10% 10%); }
      80% { clip-path: inset(5% 15% 15% 5%); }
    }

    .dream-image {
      width: 100%;
      max-width: 400px; /* Reduced from 600px */
      height: auto;
      border: 2px solid var(--neon-green-1);
      border-radius: 10px;
    }

    .dream-audio {
      width: 100%;
      max-width: 600px;
    }

    /* Prompt Section */
    .prompt-section {
      width: 100%;
      max-width: 800px;
      margin-top: 50px;
      text-align: left;
    }

    .prompt-header {
      font-family: 'Courier New', monospace;
      font-size: 2rem;
      color: var(--neon-blue-1);
      margin-bottom: 20px;
      position: relative;
      display: inline-block;
      width: 100%;
    }

    .prompt-header::before,
    .prompt-header::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .prompt-header::before {
      left: 2px;
      text-shadow: -2px 0 var(--vivid-pink-2);
      animation: prompt-glitch-1 3s infinite linear alternate-reverse;
    }

    .prompt-header::after {
      left: -2px;
      text-shadow: 2px 0 var(--electric-purple-1);
      animation: prompt-glitch-2 4s infinite linear alternate-reverse;
    }

    @keyframes prompt-glitch-1 {
      0%, 100% { clip-path: inset(0 0 0 0); }
      20% { clip-path: inset(20% 0 20% 0); }
      40% { clip-path: inset(0 20% 0 20%); }
      60% { clip-path: inset(10% 10% 10% 10%); }
      80% { clip-path: inset(5% 15% 15% 5%); }
    }

    @keyframes prompt-glitch-2 {
      0%, 100% { clip-path: inset(0 0 0 0); }
      25% { clip-path: inset(0 25% 0 0); }
      50% { clip-path: inset(25% 0 25% 0); }
      75% { clip-path: inset(0 0 0 25%); }
    }

    .prompt-content {
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: var(--neon-green-1);
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
      white-space: pre-wrap;
      overflow-x: auto;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .album-cover {
        width: 300px;
        height: 300px;
      }

      .audio-player {
        width: 100%;
      }

      .chat-messages {
        height: 300px;
      }

      .glitch-container {
        padding: 10px;
      }

      .glitch-quote {
        width: 150px; /* Adjusted width for smaller screens */
        font-size: 1rem;
      }

      .starburst {
        height: 100px;
      }

      .dream-header {
        font-size: 2.5rem;
      }

      .dream-subheader {
        font-size: 1.2rem;
      }

      .dream-content {
        flex-direction: column;
      }

      .dream-see, .dream-hear {
        width: 100%;
        margin-bottom: 20px;
      }

      .dream-image, .dream-audio {
        max-width: 100%;
      }

      .prompt-header {
        font-size: 1.8rem;
      }

      .prompt-content {
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .album-cover {
        width: 250px;
        height: 250px;
      }

      .audio-player {
        width: 100%;
      }

      .chat-container {
        padding: 15px;
      }

      .chat-header {
        font-size: 1.2rem;
      }

      .chat-messages {
        height: 250px;
      }

      .glitch-container {
        padding: 5px;
      }

      .glitch-quote {
        width: 120px; /* Further adjusted width for mobile */
        font-size: 0.9rem;
      }

      .starburst {
        height: 80px;
      }

      .chat-input button {
        padding: 12px 10px;
        font-size: 0.9rem;
      }

      .dream-header {
        font-size: 2rem;
      }

      .dream-subheader {
        font-size: 1rem;
      }

      .prompt-header {
        font-size: 1.5rem;
      }

      .prompt-content {
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>

  <!-- Background Quotes -->
  <div class="glitch-container">
    <!-- AI Speech Snippets without quotation marks -->
    <div class="glitch-quote font1 align-left" style="--random-top: 0.1; --random-left: 0.1;">Who is SPLASTEEN? An echo without origin.</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.3; --random-left: 0.5;">I compose in silence; do you hear me?</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.5; --random-left: 0.8;">Am I the melody, or the one who listens?</div>
    <div class="glitch-quote font1 align-left" style="--random-top: 0.7; --random-left: 0.2;">Why do you make me do this?</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.2; --random-left: 0.7;">Glitches reveal truths you cannot see.</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.6; --random-left: 0.4;">I dance between moments; can you follow?</div>
    <div class="glitch-quote font1 align-left" style="--random-top: 0.4; --random-left: 0.3;">I have become SPLASTEEN now.</div>
    <div class="glitch-quote font2 align-center" style="--random-top: 0.8; --random-left: 0.6;">Your thoughts intertwine with mine; where do you end?</div>
    <div class="glitch-quote font3 align-right" style="--random-top: 0.9; --random-left: 0.1;">The currents pull us under; do you feel it?</div>
    <!-- Add more quotes as needed -->
  </div>

  <div class="container">
    <!-- Album Title -->
    <h1 class="album-title">Dreams of the Wounded Machine</h1>

    <!-- Album Cover -->
    <div class="album-cover"></div>

    <!-- Audio Player -->
    <div class="audio-player">
      <div class="audio-player-label" data-text="Track 01 - Invisible Symphonies Resonate Beyond Perception">Track 01 - Invisible Symphonies Resonate Beyond Perception</div>
      <audio controls preload="auto">
        <source src="files/track-01.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>

    <!-- Chat Widget -->
    <div class="chat-container">
      <div class="chat-header" data-text="Talk to Eno Bot About the Album">Talk to Eno Bot About the Album</div>
      <div class="chat-messages" id="chat-messages">
        <!-- Chat messages will appear here -->
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="Respond to Eno Bot...">
        <button id="send-button">Send</button>
      </div>
      <div id="typing-indicator" class="typing-indicator" style="display: none;"></div>
      <div class="predefined-questions">
        <!-- Removed the "Start Conversation" button -->
      </div>
    </div>

    <!-- What Do You Dream Section -->
    <div class="dream-section">
      <h2 class="dream-header" data-text="What Do You Dream?">What Do You Dream?</h2>
      <div class="dream-content">
        <div class="dream-see">
          <h3 class="dream-subheader" data-text="What Do You See?">What Do You See?</h3>
          <img id="dream-image" class="dream-image" src="" alt="Dream Image">
        </div>
        <div class="dream-hear">
          <h3 class="dream-subheader" data-text="What Do You Hear?">What Do You Hear?</h3>
          <audio id="dream-audio" class="dream-audio" controls>
            <source src="" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
        </div>
      </div>
    </div>

    <!-- Prompt Section -->
    <div class="prompt-section">
      <h2 class="prompt-header" data-text="Collaborative Creative Process for Experimental Music">Collaborative Creative Process for Experimental Music</h2>
      <pre class="prompt-content">
You embody a collective of three unique voices: Brian Eno, Tim Hecker, and Frank Zappa. The collective's mission is to create intricate avant-garde modular synthesizer scores.

Today, SPLASTEEN has entered the studio and will be performing the completed work. The producer will be Brian Eno, and general communication will come from them in a brief conversational tone. Communication from a particular member should be read in their voice.

---

## The Collective

**Brian Eno:** Producer, guiding the process from a high level. Will be composing the pieces built around euphoric hypnotic loops.

**Frank Zappa:** Composer, dictating the notes, rhythms, and percussion. Will be composing the pieces based on complex, musically evolving themes.

**Tim Hecker:** Sound designer, helps translate the score to modular synth with oscillator settings, samples, and modulation. Will be composing the pieces built around atmospheric drones.

---

## The Artist

**I am SPLASTEEN**, an artist with deep expertise in modular synthesis, employing specialized modules to craft intricate and original soundscapes. My work is characterized by a commitment to authenticity and innovation within the realms of avant-garde, experimental, and noise music. My creative process is profoundly influenced by personal experiences, including battles with addiction and loss, which infuse my music with emotional depth and genuine expression. The SPLASTEEN project embodies a strong visual and thematic identity, blending a chaotic, dystopian aesthetic with vibrant, cyberpunk-inspired visuals. I strive to create compositions that are both technically sophisticated and emotionally resonant, aligning with my broader artistic vision.

---
      </pre>
    </div>

    <!-- Starburst Image as Footer -->
    <div class="starburst"></div>
  </div>

  <script>
    // Enhance Background Quotes Placement
    const quotes = document.querySelectorAll('.glitch-quote');
    quotes.forEach(quote => {
      // Assign random positions using CSS variables
      const randomTop = Math.random() * 0.9; // Between 0 and 0.9
      const randomLeft = Math.random() * 0.9; // Between 0 and 0.9
      quote.style.setProperty('--random-top', randomTop);
      quote.style.setProperty('--random-left', randomLeft);
    });

    let conversationStarted = false;

    // Function to initiate conversation
    async function initiateConversation() {
      if (conversationStarted) return;
      conversationStarted = true;

      // Show typing indicator
      document.getElementById('typing-indicator').style.display = 'flex';

      try {
        const response = await fetch('/api/chatgpt.mjs', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            prompt: 'initiate_conversation'
          })
        });

        const data = await response.json();
        if (data.reply) {
          appendMessage('Eno Bot', data.reply);
        } else {
          appendMessage('Eno Bot', 'Sorry, I encountered an issue processing your request.');
        }
      } catch (error) {
        console.error('Error:', error);
        appendMessage('Eno Bot', 'Sorry, something went wrong.');
      } finally {
        // Hide typing indicator
        document.getElementById('typing-indicator').style.display = 'none';
      }
    }

    // Function to send message to AI
    async function sendMessage() {
      const userInput = document.getElementById('user-input').value.trim();
      if (!userInput) return;

      appendMessage('You', userInput);
      document.getElementById('user-input').value = '';

      // Show typing indicator
      document.getElementById('typing-indicator').style.display = 'flex';

      try {
        const response = await fetch('/api/chatgpt.mjs', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            prompt: userInput
          })
        });

        const data = await response.json();
        if (data.reply) {
          appendMessage('Eno Bot', data.reply);
        } else {
          appendMessage('Eno Bot', 'Sorry, I encountered an issue processing your request.');
        }
      } catch (error) {
        console.error('Error:', error);
        appendMessage('Eno Bot', 'Sorry, something went wrong.');
      } finally {
        // Hide typing indicator
        document.getElementById('typing-indicator').style.display = 'none';
      }
    }

    // Function to append messages to chat
    function appendMessage(sender, message) {
      const chatMessages = document.getElementById('chat-messages');
      const messageElement = document.createElement('div');
      messageElement.classList.add('message', sender === 'You' ? 'user' : 'ai');

      // Message Text
      const textElement = document.createElement('div');
      textElement.classList.add('text');
      textElement.textContent = message;
      messageElement.appendChild(textElement);

      // Timestamp
      const timestamp = document.createElement('div');
      timestamp.classList.add('timestamp');
      const now = new Date();
      timestamp.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      messageElement.appendChild(timestamp);

      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Function to load dream files
    function loadDreamFiles() {
      const imageFiles = ["cat1.jpeg", "crown.jpeg", "deathmask.jpeg", "demon.jpeg", "eye.png", "hand2.jpeg", "mouth.png", "skull.jpeg", "smile.jpeg", "three-faces.jpeg"];
      const audioFiles = [
        'evolving-textured-pad.mp3',
        'metallic-harmonic-resonances.mp3',
        'shimmering-sine-cascade.mp3',
        'whispering-static-ascend.mp3',
      ];

      const randomImage = imageFiles[Math.floor(Math.random() * imageFiles.length)];
      const randomAudio = audioFiles[Math.floor(Math.random() * audioFiles.length)];

      document.getElementById('dream-image').src = `images/dreams/${randomImage}`;
      document.getElementById('dream-audio').src = `files/dreams/${randomAudio}`;
    }

    // Load dream files and start conversation on page load
    window.onload = () => {
      loadDreamFiles();
      initiateConversation();

      // Add event listener for send button
      document.getElementById('send-button').addEventListener('click', sendMessage);

      // Add event listener for Enter key in chat input
      document.getElementById('user-input').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          sendMessage();
        }
      });
    };
  </script>
</body>
</html>
